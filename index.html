<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css?v=1.1">
  <title>Üyelik Kartı Düzenleyici</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
body {
  margin: 0;
  font-family: 'Segoe UI', Arial, sans-serif;
  background: #0a0a0a; /* siyah arka plan */
  color: #f0f0f0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}
#serviceInput {
  width: 100%;
  padding: 6px 8px;
  margin-top: 4px;
  border-radius: 6px;
  border: 1px solid #333;
  background: #0f0f0f;
  color: #f0f0f0;
  text-align: center;
}
.container {
  display: flex;
  gap: 20px;
  justify-content: center; /* yatay ortala */
  align-items: flex-start;
}

.panel {
  background: #1a1a1a;
  padding: 20px;
  border-radius: 8px;
  width: 280px;
  display: flex;
  flex-direction: column;
  align-items: center; /* panel içeriğini ortala */
}

.panel h1 {
  font-size: 18px;
  margin-bottom: 12px;
  text-align: center;
  width: 100%;
}

label {
  font-size: 13px;
  margin-top: 10px;
  color: #cccccc;
  width: 100%;
  text-align: center; /* label ortalansın */
}

input {
  width: 100%;
  padding: 6px 8px;
  margin-top: 4px;
  border-radius: 6px;
  border: 1px solid #333;
  background: #0f0f0f;
  color: #f0f0f0;
  text-align: center; /* input içeriği ortalanmış */
}

input:focus {
  outline: 1px solid #555;
}

button {
  margin-top: 12px;
  padding: 8px 12px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  background: #333;
  color: #f0f0f0;
  font-weight: bold;
  width: 100%;
}

.note {
  background: cadetblue;
  border-radius: 20px;
  font-size: 12px;
  color: #ddd;
  margin-top: 12px;
  text-align: center;
  padding: 6px 12px;
  width: 100%;
  box-sizing: border-box;
  border: 1px solid #333;
}

.preview {
  background: #111;
  padding: 12px;
  border-radius: 8px;
  width: 380px;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
}

canvas {
  max-width: 100%;
  height: auto;
  border-radius: 6px;
}

.logo {
  position: absolute;
  top: 10px;
  left: 10px;
  width: 50px;
  height: auto;
}
</style>





</head>
<body>
<div class="container">
  <div class="panel">
    <h1>Kart Bilgileri</h1>
    <label>Fotoğraf</label>
    <input type="file" id="photoInput" accept="image/*">

    <label>İsim</label>
    <input type="text" id="nameInput" placeholder="Ad Soyad">

    <label>Cinsiyet</label>
    <input type="text" id="sexInput" placeholder="Sex">
    
    <label>Servis</label>
    <select id="serviceInput">
    <option value="">Service</option>
    <option value="District Attorney’s Office">District Attorney’s Office</option>
    <option value="LS County Sheriff's Department">LS County Sheriff's Department</option>
    <option value="LS Police Department">LS Police Department</option>
    <option value="LS Fire Department">LS Fire Department</option>
    <option value="SA Department of Corrections">SA Department of Corrections</option>
    </select>

    <label>ID No</label>
    <input type="text" id="idInput" placeholder="ID No">

    <button id="updateBtn">Önizle</button>
    <button id="downloadBtn">PNG İndir</button>
    <div class="note">Sağ tıklayıp resmi kaydetmeniz de mümkün.</div>
  </div>

  <div class="preview">
    <canvas id="cardCanvas"></canvas>
  </div>
</div>
<script>
  const canvas = document.getElementById('cardCanvas');
  const ctx = canvas.getContext('2d');

  const nameInput = document.getElementById('nameInput');
  const sexInput = document.getElementById('sexInput');
  const serviceInput = document.getElementById('serviceInput');
  const idInput = document.getElementById('idInput');
  const photoInput = document.getElementById('photoInput');

  let photoImg = null;
  let templateImg = new Image();

  templateImg.onload = () => {
    // Canvas boyutu şablonun orijinal boyutu ile aynı olacak
    canvas.width = templateImg.width;
    canvas.height = templateImg.height;
    render();
  };
  templateImg.src = "sablon.png";

  function render(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.drawImage(templateImg,0,0);

    // Fotoğraf alanı — koordinatlar orijinal ölçüye göre
    if(photoImg){
      const x=392,y=794.3,w=348,h=470;
      ctx.save();
      ctx.beginPath(); ctx.rect(x,y,w,h); ctx.clip();
      drawImageCover(ctx,photoImg,x,y,w,h);
      ctx.restore();
    }

    ctx.fillStyle = '#000';
    ctx.textBaseline = 'top';

    ctx.font = 'bold 40px Arial';
    ctx.fillText(nameInput.value || '', 1000, 820);

    ctx.font = '40px Arial';
    ctx.fillText(sexInput.value || '', 1000, 867);
    ctx.fillText(serviceInput.value || '', 1000, 910);
    ctx.fillStyle = '#ff0000d9';
    ctx.fillText(idInput.value || '', 1000, 955);
  }

  function drawImageCover(ctx,img,x,y,w,h){
    const iw=img.width, ih=img.height;
    const r=Math.max(w/iw,h/ih);
    const nw=iw*r, nh=ih*r;
    const cx=(nw-w)/2, cy=(nh-h)/2;
    ctx.drawImage(img,-cx+x,-cy+y,nw,nh);
  }

  photoInput.addEventListener('change', e=>{
    const f=e.target.files[0]; if(!f) return;
    const url=URL.createObjectURL(f);
    const img=new Image();
    img.onload=()=>{photoImg=img; render();};
    img.src=url;
  });

  document.getElementById('updateBtn').addEventListener('click',render);

  document.getElementById('downloadBtn').addEventListener('click',()=>{
    canvas.toBlob(blob=>{
      const a=document.createElement('a');
      a.href=URL.createObjectURL(blob);
      a.download='uyelik-karti.png';
      a.click();
      URL.revokeObjectURL(a.href);
    });
  });
</script>
</body>
</html>
